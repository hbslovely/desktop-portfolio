<!-- Welcome/Lock Screen -->
<div class="welcome-screen" *ngIf="!isAuthenticated()">
  <!-- Background with blur effect -->
  <div class="welcome-background">
    <div class="wallpaper"></div>
    <div class="overlay"></div>
  </div>

  <!-- Main content -->
  <div class="welcome-content">
    <div class="lock-screen-container">
      <!-- Top Section: Time & Greeting -->
      <div class="top-section">
        <div class="time-display">
          <div class="current-time">{{ currentTime() }}</div>
          <div class="current-date">{{ currentDate() }}</div>
        </div>
        <div class="greeting-text">{{ greeting() }}</div>
      </div>

      <!-- Middle Section: Login -->
      <div class="middle-section">
        <div class="user-avatar">
          <img src="assets/images/icons/profile.png" alt="User Avatar" class="avatar-image">
          <div class="avatar-ring"></div>
        </div>

        <!-- Password Input Section -->
        <div class="login-section">
          <div class="password-input-wrapper">
            <input
              [type]="showPassword() ? 'text' : 'password'"
              class="password-input"
              [class.error]="errorMessage()"
              [value]="password()"
              (input)="onPasswordInput($event)"
              (keypress)="onKeyPress($event)"
              placeholder="Enter password to unlock"
              autofocus>
            <button 
              type="button" 
              class="password-toggle"
              (click)="togglePasswordVisibility()"
              [title]="showPassword() ? 'Hide password' : 'Show password'">
              <i [class]="showPassword() ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
            </button>
            <button 
              type="button" 
              class="unlock-button"
              [class.loading]="isLoading()"
              [disabled]="!password() || isLoading()"
              (click)="onSubmit()">
              <i class="pi pi-lock-open" *ngIf="!isLoading()"></i>
              <div *ngIf="isLoading()" class="loading-spinner"></div>
            </button>
          </div>

          <!-- Error Message -->
          <div class="error-message" *ngIf="errorMessage()">
            <i class="pi pi-exclamation-triangle"></i>
            <span>{{ errorMessage() }}</span>
          </div>

          <!-- Password Hint -->
          <div class="hint-section">
            <button class="hint-btn" (click)="toggleHint()">
              <i [class]="showHint() ? 'pi pi-eye-slash' : 'pi pi-info-circle'"></i>
              {{ showHint() ? 'Hide Hint' : 'Show Hint' }}
            </button>
            <div class="password-hint" *ngIf="showHint()">
              <i class="pi pi-lightbulb"></i>
              {{ getPasswordHint() }}
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Section: Fun Features -->
      <div class="bottom-section">
        <!-- Daily Quote -->
        <div class="info-card quote-card">
          <div class="card-icon">ðŸ’­</div>
          <p class="card-text">{{ currentQuote() }}</p>
          <button (click)="refreshFunContent()" class="refresh-card-btn" title="New Quote">
            <i class="pi pi-refresh"></i>
          </button>
        </div>

        <!-- Fun Fact -->
        <div class="info-card fact-card">
          <div class="card-header">
            <div class="card-icon">ðŸŽ¯</div>
            <span class="card-title">Did You Know?</span>
          </div>
          <p class="card-text">{{ quickFact() }}</p>
        </div>

        <!-- Daily Advice -->
        <div class="info-card advice-card" *ngIf="!adviceLoading()">
          <div class="card-header">
            <div class="card-icon">ðŸ’¡</div>
            <span class="card-title">Daily Wisdom</span>
          </div>
          <p class="card-text">{{ adviceText() }}</p>
          <button (click)="refreshAdvice()" class="refresh-card-btn" title="New Advice">
            <i class="pi pi-refresh"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Screen (shown after authentication) -->
  <div class="loading-screen" *ngIf="isAuthenticated()">
    <div class="loading-content">
      <div class="loading-avatar">
        <img src="assets/images/icons/profile.png" alt="User Avatar" class="avatar-image">
        <div class="success-checkmark">
          <i class="pi pi-check"></i>
        </div>
      </div>
      <div class="loading-text">Welcome back!</div>
      <div class="loading-progress">
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Desktop Content (shown after authentication) -->
<div class="desktop-content" *ngIf="isAuthenticated()">
  <ng-content></ng-content>
</div>
