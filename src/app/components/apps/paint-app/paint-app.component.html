<div class="paint-app">
  <div class="toolbar">
    <div class="tool-section">
      <h3>Tools</h3>
      <div class="tools">
        <button 
          *ngFor="let tool of tools"
          (click)="selectTool(tool.id)"
          [class.active]="selectedTool() === tool.id"
          class="tool-button"
          [title]="tool.name">
          <i [class]="tool.icon"></i>
          <span>{{ tool.name }}</span>
        </button>
      </div>
    </div>

    <div class="color-section">
      <h3>Colors</h3>
      <div class="color-palette">
        <button 
          *ngFor="let color of colors"
          (click)="selectColor(color)"
          [class.active]="selectedColor() === color"
          class="color-button"
          [style.background-color]="color"
          [title]="color">
        </button>
      </div>
      <div class="current-color">
        <span>Current:</span>
        <div 
          class="color-preview"
          [style.background-color]="selectedColor()">
        </div>
      </div>
    </div>

    <div class="size-section">
      <h3>Brush Size</h3>
      <div class="size-controls">
        <input 
          type="range" 
          min="1" 
          max="50" 
          [(ngModel)]="lineWidth"
          class="size-slider">
        <span class="size-value">{{ lineWidth() }}px</span>
      </div>
      <div class="size-preview">
        <div 
          class="size-circle"
          [style.width.px]="lineWidth()"
          [style.height.px]="lineWidth()"
          [style.background-color]="selectedColor()">
        </div>
      </div>
    </div>

    <div class="text-section" *ngIf="selectedTool() === 'text'">
      <h3>Text Settings</h3>
      <div class="text-controls">
        <div class="font-size-control">
          <label>Font Size:</label>
          <input 
            type="range" 
            min="8" 
            max="72" 
            [(ngModel)]="fontSize"
            class="font-size-slider">
          <span class="font-size-value">{{ fontSize() }}px</span>
        </div>
        <div class="font-family-control">
          <label>Font:</label>
          <select [(ngModel)]="fontFamily" class="font-select">
            <option value="Arial">Arial</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Courier New">Courier New</option>
            <option value="Georgia">Georgia</option>
            <option value="Verdana">Verdana</option>
            <option value="Comic Sans MS">Comic Sans MS</option>
          </select>
        </div>
      </div>
    </div>

    <div class="actions-section">
      <h3>Actions</h3>
      <div class="action-buttons">
        <button 
          (click)="undo()"
          class="action-button"
          title="Undo">
          <i class="pi pi-undo"></i>
          <span>Undo</span>
        </button>
        <button 
          (click)="clearCanvas()"
          class="action-button clear"
          title="Clear Canvas">
          <i class="pi pi-trash"></i>
          <span>Clear</span>
        </button>
        <button 
          (click)="downloadCanvas()"
          class="action-button download"
          title="Download">
          <i class="pi pi-download"></i>
          <span>Save</span>
        </button>
      </div>
    </div>
  </div>

  <div class="canvas-container">
    <canvas 
      #canvas
      class="drawing-canvas"
      (mousedown)="startDrawing($event)"
      (mousemove)="draw($event)"
      (mouseup)="stopDrawing($event)"
      (mouseleave)="stopDrawing($event)">
    </canvas>
  </div>

  <!-- Text Input Dialog -->
  <div *ngIf="showTextInput()" class="text-input-overlay" (click)="cancelText()">
    <div class="text-input-dialog" (click)="$event.stopPropagation()">
      <h3>Add Text</h3>
      <div class="text-input-container">
        <input 
          type="text" 
          [(ngModel)]="textInput"
          placeholder="Enter text..."
          class="text-input-field"
          (keydown.enter)="addText()"
          (keydown.escape)="cancelText()"
          autofocus>
      </div>
      <div class="text-input-actions">
        <button (click)="addText()" class="text-add-btn">Add Text</button>
        <button (click)="cancelText()" class="text-cancel-btn">Cancel</button>
      </div>
    </div>
  </div>

  <div class="status-bar">
    <div class="status-info">
      <span>Tool: {{ getSelectedToolName() }}</span>
      <span>Color: {{ selectedColor() }}</span>
      <span>Size: {{ lineWidth() }}px</span>
    </div>
    <div class="canvas-info">
      <span>{{ canvasWidth }} Ã— {{ canvasHeight }}</span>
    </div>
  </div>
</div>
