<div class="settings-app">
  <!-- Settings Header -->
  <div class="settings-header">
    <div class="header-content">
      <i class="pi pi-cog"></i>
      <span>Settings</span>
    </div>
    <button class="save-btn" (click)="saveSettings()" [disabled]="!hasUnsavedChanges()">
      <i class="pi pi-save"></i>
      <span>Save</span>
    </button>
  </div>

  <!-- Settings Body -->
  <div class="settings-body">
    
    <!-- Wallpaper -->
    <div class="setting-group">
      <div class="setting-title">
        <i class="pi pi-image"></i>
        <span>Wallpaper</span>
      </div>
      <div class="wallpaper-grid">
        <div 
          *ngFor="let wallpaper of wallpapers" 
          class="wallpaper-card"
          [class.active]="selectedWallpaper() === wallpaper.id"
          (click)="onWallpaperChange(wallpaper.id)">
          <img [src]="wallpaper.preview" [alt]="wallpaper.name">
          <i class="pi pi-check check-icon" *ngIf="selectedWallpaper() === wallpaper.id"></i>
        </div>
      </div>
    </div>

    <!-- Theme -->
    <div class="setting-group">
      <div class="setting-title">
        <i class="pi pi-palette"></i>
        <span>Theme</span>
      </div>
      <div class="button-group">
        <button 
          *ngFor="let theme of themes" 
          class="option-btn"
          [class.active]="selectedTheme() === theme.value"
          (click)="onThemeChange(theme.value)">
          <i [class]="theme.icon"></i>
          <span>{{ theme.label }}</span>
        </button>
      </div>
    </div>

    <!-- Theme Color -->
    <div class="setting-group">
      <div class="setting-title">
        <i class="pi pi-star"></i>
        <span>Accent Color</span>
      </div>
      <div class="color-grid">
        <button 
          *ngFor="let color of themeColors" 
          class="color-btn"
          [class.active]="selectedThemeColor() === color.value"
          [style.background-color]="color.color"
          (click)="onThemeColorChange(color.value)"
          [title]="color.label">
          <i class="pi pi-check" *ngIf="selectedThemeColor() === color.value"></i>
        </button>
      </div>
    </div>

    <!-- Window Color -->
    <div class="setting-group">
      <div class="setting-title">
        <i class="pi pi-window-maximize"></i>
        <span>Window Color</span>
      </div>
      <div class="color-grid">
        <button 
          *ngFor="let color of windowColors" 
          class="color-btn"
          [class.active]="selectedWindowColor() === color.value"
          [style.background-color]="color.color"
          (click)="onWindowColorChange(color.value)"
          [title]="color.label">
          <i class="pi pi-check" *ngIf="selectedWindowColor() === color.value"></i>
        </button>
      </div>
    </div>

    <!-- Window Opacity -->
    <div class="setting-group">
      <div class="setting-title">
        <i class="pi pi-eye"></i>
        <span>Window Opacity</span>
        <span class="setting-value">{{ windowOpacity() }}%</span>
      </div>
      <input 
        type="range" 
        min="60" 
        max="100" 
        [value]="windowOpacity()" 
        (input)="onWindowOpacityChange($event)"
        class="range-slider">
    </div>

    <!-- Font Size -->
    <div class="setting-group">
      <div class="setting-title">
        <i class="pi pi-font"></i>
        <span>Font Size</span>
      </div>
      <div class="button-group">
        <button 
          *ngFor="let size of fontSizes" 
          class="option-btn"
          [class.active]="fontSize() === size.value"
          (click)="onFontSizeChange(size.value)">
          {{ size.label }}
        </button>
      </div>
    </div>

    <!-- Taskbar Position -->
    <div class="setting-group">
      <div class="setting-title">
        <i class="pi pi-th-large"></i>
        <span>Taskbar Position</span>
      </div>
      <div class="button-group">
        <button 
          *ngFor="let position of taskbarPositions" 
          class="option-btn"
          [class.active]="taskbarPosition() === position.value"
          (click)="onTaskbarPositionChange(position.value)">
          <i [class]="position.icon"></i>
          <span>{{ position.label }}</span>
        </button>
      </div>
    </div>

    <!-- Toggle Settings -->
    <div class="setting-group">
      <div class="toggle-row">
        <div class="toggle-item" (click)="toggleSetting('backdropEnabled')">
          <div class="toggle-info">
            <i class="pi pi-image"></i>
            <span>Backdrop Overlay</span>
          </div>
          <div class="toggle-switch" [class.active]="backdropEnabled()">
            <div class="toggle-knob"></div>
          </div>
        </div>
        
        <div class="toggle-item" (click)="toggleSetting('animations')">
          <div class="toggle-info">
            <i class="pi pi-replay"></i>
            <span>Animations</span>
          </div>
          <div class="toggle-switch" [class.active]="animations()">
            <div class="toggle-knob"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="settings-actions">
      <button class="action-btn reset-btn" (click)="resetSettings()">
        <i class="pi pi-refresh"></i>
        <span>Reset to Defaults</span>
      </button>
    </div>

  </div>
</div>
