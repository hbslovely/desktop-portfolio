<div class="text-editor-container">
  <!-- Toolbar -->
  <div class="editor-toolbar">
    <div class="toolbar-group">
      <button class="toolbar-btn" (click)="newDocument()" title="New Document">
        <i class="pi pi-file"></i>
      </button>
      <button class="toolbar-btn" (click)="openSaveDialog()" title="Save">
        <i class="pi pi-save"></i>
      </button>
    </div>
    
    <div class="toolbar-separator"></div>
    
    <div class="toolbar-group">
      <button class="toolbar-btn" [class.active]="isBold()" (click)="formatBold()" title="Bold">
        <i class="pi pi-bold"></i>
      </button>
      <button class="toolbar-btn" [class.active]="isItalic()" (click)="formatItalic()" title="Italic">
        <i class="pi pi-italic"></i>
      </button>
      <button class="toolbar-btn" [class.active]="isUnderline()" (click)="formatUnderline()" title="Underline">
        <i class="pi pi-underline"></i>
      </button>
    </div>
    
    <div class="toolbar-separator"></div>
    
    <div class="toolbar-group">
      <select class="toolbar-select" [value]="currentFontSize()" (change)="changeFontSize($any($event.target).value)">
        <option value="12px">12px</option>
        <option value="14px">14px</option>
        <option value="16px">16px</option>
        <option value="18px">18px</option>
        <option value="24px">24px</option>
        <option value="32px">32px</option>
      </select>
    </div>
    
    <div class="toolbar-separator"></div>
    
    <div class="toolbar-group">
      <button class="toolbar-btn" (click)="formatHeading('1')" title="Heading 1">
        H1
      </button>
      <button class="toolbar-btn" (click)="formatHeading('2')" title="Heading 2">
        H2
      </button>
      <button class="toolbar-btn" (click)="formatHeading('3')" title="Heading 3">
        H3
      </button>
    </div>
    
    <div class="toolbar-separator"></div>
    
    <div class="toolbar-group">
      <button class="toolbar-btn" (click)="formatAlignment('left')" [class.active]="currentAlignment() === 'left'" title="Align Left">
        <i class="pi pi-align-left"></i>
      </button>
      <button class="toolbar-btn" (click)="formatAlignment('center')" [class.active]="currentAlignment() === 'center'" title="Align Center">
        <i class="pi pi-align-center"></i>
      </button>
      <button class="toolbar-btn" (click)="formatAlignment('right')" [class.active]="currentAlignment() === 'right'" title="Align Right">
        <i class="pi pi-align-right"></i>
      </button>
      <button class="toolbar-btn" (click)="formatAlignment('justify')" [class.active]="currentAlignment() === 'justify'" title="Justify">
        <i class="pi pi-align-justify"></i>
      </button>
    </div>
    
    <div class="toolbar-separator"></div>
    
    <div class="toolbar-group">
      <button class="toolbar-btn" (click)="formatList('unordered')" title="Bullet List">
        <i class="pi pi-list"></i>
      </button>
      <button class="toolbar-btn" (click)="formatList('ordered')" title="Numbered List">
        <i class="pi pi-sort-numeric-up"></i>
      </button>
    </div>
    
    <div class="toolbar-separator"></div>
    
    <div class="toolbar-group">
      <button class="toolbar-btn" (click)="insertLink()" title="Insert Link">
        <i class="pi pi-link"></i>
      </button>
      <button class="toolbar-btn" (click)="insertImage()" title="Insert Image">
        <i class="pi pi-image"></i>
      </button>
    </div>
    
    <div class="toolbar-separator"></div>
    
    <div class="toolbar-group">
      <button class="toolbar-btn" (click)="clearFormatting()" title="Clear Formatting">
        <i class="pi pi-times"></i>
      </button>
    </div>
    
    <div class="toolbar-spacer"></div>
    
    <div class="toolbar-group">
      <div class="file-status">
        <span class="file-name">{{ currentFileName() }}</span>
        <span class="modified-indicator" *ngIf="isModified()">‚óè</span>
      </div>
    </div>
  </div>
  
  <!-- Editor Area -->
  <div class="editor-content-wrapper">
    <div 
      #editorContent
      class="editor-content"
      contenteditable="true"
      (input)="onContentChange()"
      (mouseup)="updateToolbarState()"
      (keyup)="updateToolbarState()">
    </div>
  </div>
  
  <!-- Status Bar -->
  <div class="editor-statusbar">
    <span>Rich Text Editor</span>
    <div class="statusbar-actions">
      <button class="statusbar-btn" (click)="exportAsText()" title="Export as Text">
        <i class="pi pi-file-export"></i> Export TXT
      </button>
      <button class="statusbar-btn" (click)="exportAsHtml()" title="Export as HTML">
        <i class="pi pi-file-export"></i> Export HTML
      </button>
    </div>
  </div>
</div>

<!-- Save Dialog -->
<div class="save-dialog-overlay" *ngIf="showSaveDialog()" (click)="closeSaveDialog()">
  <div class="save-dialog" (click)="$event.stopPropagation()">
    <div class="save-dialog-header">
      <h3>Save File</h3>
      <button class="close-btn" (click)="closeSaveDialog()">
        <i class="pi pi-times"></i>
      </button>
    </div>
    
    <div class="save-dialog-body">
      <!-- Path Navigation -->
      <div class="path-bar">
        <div class="breadcrumbs">
          <span *ngFor="let crumb of breadcrumbs(); let last = last" class="breadcrumb">
            <button *ngIf="!last" class="breadcrumb-btn" (click)="navigateToPath(crumb.path)">
              {{ crumb.name }}
            </button>
            <span *ngIf="last" class="current-crumb">{{ crumb.name }}</span>
            <i *ngIf="!last" class="pi pi-angle-right separator"></i>
          </span>
        </div>
      </div>
      
      <!-- Folder List -->
      <div class="folder-list">
        <div 
          *ngFor="let folder of currentFolders()" 
          class="folder-item"
          (dblclick)="selectFolder(folder)">
          <i class="pi pi-folder folder-icon"></i>
          <span class="folder-name">{{ folder.name }}</span>
        </div>
        
        <div *ngIf="currentFolders().length === 0" class="empty-message">
          No folders in this location
        </div>
      </div>
      
      <!-- File Name Input -->
      <div class="file-name-input">
        <label for="fileName">File name:</label>
        <input 
          type="text" 
          id="fileName" 
          [(ngModel)]="saveFileName"
          placeholder="Enter file name"
          (keyup.enter)="saveFile()">
      </div>
    </div>
    
    <div class="save-dialog-footer">
      <button class="btn btn-secondary" (click)="closeSaveDialog()">Cancel</button>
      <button class="btn btn-primary" (click)="saveFile()">Save</button>
    </div>
  </div>
</div>

<!-- Success Dialog -->
<div class="dialog-overlay" *ngIf="showSuccessDialog()" (click)="closeSuccessDialog()">
  <div class="success-dialog" (click)="$event.stopPropagation()">
    <div class="dialog-icon">
      <i class="pi pi-check-circle"></i>
    </div>
    <h3>Success</h3>
    <p>{{ successMessage() }}</p>
    <button class="btn btn-primary" (click)="closeSuccessDialog()">OK</button>
  </div>
</div>

