<!-- Settings Dialog Backdrop -->
<div 
  *ngIf="isVisible" 
  class="settings-backdrop" 
  (click)="onBackdropClick()">
</div>

<!-- Settings Dialog -->
<div 
  *ngIf="isVisible" 
  class="settings-dialog"
  (click)="onDialogClick($event)">
  
  <!-- Dialog Header -->
  <div class="settings-header">
    <div class="header-left">
      <i class="pi pi-cog settings-icon"></i>
      <h2>Settings</h2>
    </div>
    <button class="close-btn" (click)="onCloseDialog()" title="Close Settings">
      <i class="pi pi-times"></i>
    </button>
  </div>

  <!-- Dialog Content -->
  <div class="settings-content">
    
    <!-- Wallpaper Section -->
    <div class="settings-section">
      <div class="section-header">
        <i class="pi pi-image section-icon"></i>
        <h3>Wallpaper</h3>
      </div>
      <div class="section-content">
        <p class="section-description">Choose your desktop wallpaper</p>
        <div class="wallpaper-grid">
          <div 
            *ngFor="let wallpaper of wallpapers" 
            class="wallpaper-option"
            [class.selected]="selectedWallpaper() === wallpaper.id"
            (click)="onWallpaperChange(wallpaper.id)">
            <div class="wallpaper-preview">
              <img [src]="wallpaper.preview" [alt]="wallpaper.name">
              <div class="wallpaper-overlay">
                <i class="pi pi-check" *ngIf="selectedWallpaper() === wallpaper.id"></i>
              </div>
            </div>
            <span class="wallpaper-name">{{ wallpaper.name }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Theme Section -->
    <div class="settings-section">
      <div class="section-header">
        <i class="pi pi-palette section-icon"></i>
        <h3>Theme</h3>
      </div>
      <div class="section-content">
        <p class="section-description">Choose your preferred theme</p>
        <div class="theme-options">
          <div 
            *ngFor="let theme of themes" 
            class="theme-option"
            [class.selected]="selectedTheme() === theme.value"
            (click)="onThemeChange(theme.value)">
            <i [class]="theme.icon"></i>
            <span>{{ theme.label }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Theme Color Section -->
    <div class="settings-section">
      <div class="section-header">
        <i class="pi pi-palette section-icon"></i>
        <h3>Theme Color</h3>
      </div>
      <div class="section-content">
        <p class="section-description">Choose the accent color for window titles and UI elements</p>
        <div class="color-grid">
          <div 
            *ngFor="let color of themeColors" 
            class="color-option"
            [class.selected]="selectedThemeColor() === color.value"
            [style.background-color]="color.color"
            (click)="onThemeColorChange(color.value)"
            [title]="color.label">
          </div>
        </div>
      </div>
    </div>

    <!-- Backdrop Section -->
    <div class="settings-section">
      <div class="section-header">
        <i class="pi pi-eye section-icon"></i>
        <h3>Backdrop</h3>
      </div>
      <div class="section-content">
        <div class="toggle-setting">
          <div class="setting-info">
            <span class="setting-label">Enable backdrop overlay</span>
            <span class="setting-description">Add a subtle overlay above the wallpaper</span>
          </div>
          <div class="toggle-switch" [class.active]="backdropEnabled()" (click)="onBackdropToggle()">
            <div class="toggle-slider"></div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Dialog Footer -->
  <div class="settings-footer">
    <div class="footer-buttons">
      <button class="btn-cancel" (click)="onCancel()">
        Cancel
      </button>
      <button class="btn-apply" (click)="onApply()" [disabled]="!hasUnsavedChanges()">
        Apply
      </button>
      <button class="btn-save" (click)="onSave()" [disabled]="!hasUnsavedChanges()">
        Save
      </button>
    </div>
  </div>
</div>
