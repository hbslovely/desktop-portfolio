<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V√≤ng Quay T·∫øt 2026 - L∆∞u Tr·ªØ K·∫øt Qu·∫£</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #fbc531;
            --red: #b31217;
            --yellow-light: #fffa65;
        }

        body {
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            min-height: 100vh; margin: 0; padding: 20px;
            background: #b31217 radial-gradient(circle, #d63031 0%, #5c090b 100%);
            font-family: 'Quicksand', sans-serif; color: white; overflow-x: hidden;
        }

        h2 { font-family: 'Dancing Script', cursive; font-size: clamp(30px, 8vw, 50px); color: var(--gold); margin: 0; text-align: center; text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }

        /* Khung th√¥ng tin ng∆∞·ªùi quay b√™n tr√°i */
        #playerBox {
            position: fixed; left: 20px; top: 120px;
            background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px);
            padding: 15px; border-left: 5px solid var(--gold); border-radius: 0 15px 15px 0;
            display: none; box-shadow: 5px 5px 15px rgba(0,0,0,0.3); z-index: 90;
        }

        /* Container v√≤ng quay cƒÉn chu·∫©n t√¢m tuy·ªát ƒë·ªëi */
        .wheel-outer {
            position: relative;
            width: min(85vw, 500px);
            height: min(85vw, 500px);
            margin-top: 40px;
            display: flex; justify-content: center; align-items: center;
            border: 12px solid var(--gold);
            border-radius: 50%;
            background: var(--gold);
            box-sizing: border-box; /* Quan tr·ªçng ƒë·ªÉ kh√¥ng l·ªách t√¢m */
        }

        .light-glow {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 50%; pointer-events: none; z-index: 1;
        }
        .spinning .light-glow { animation: pulse 0.5s infinite alternate; }
        @keyframes pulse { from { box-shadow: 0 0 10px var(--yellow-light); } to { box-shadow: 0 0 50px var(--yellow-light); } }

        .pointer {
            position: absolute; top: -35px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent;
            border-top: 55px solid #fff; z-index: 10; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5));
        }

        canvas {
            width: 100%; height: 100%; border-radius: 50%;
            transition: transform 8s cubic-bezier(0.1, 0, 0, 1);
            background: white; display: block;
        }

        #spinBtn {
            margin-top: 30px; padding: 15px 50px; font-size: 22px; font-weight: bold;
            background: linear-gradient(180deg, var(--yellow-light), var(--gold));
            color: var(--red); border: none; border-radius: 50px; cursor: pointer;
            box-shadow: 0 6px 0 #8d240d; font-family: 'Quicksand', sans-serif;
            transition: 0.2s;
        }
        #spinBtn:disabled { background: #7f8c8d; box-shadow: 0 4px 0 #2f3640; cursor: not-allowed; opacity: 0.7; }

        /* Modal K·∫øt qu·∫£ l·ªách tr√°i tr√™n m√†n h√¨nh r·ªông */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); display: flex; align-items: center; justify-content: center; z-index: 100;
        }

        @media (min-width: 1024px) {
            .result-side { margin-right: 600px; } /* ƒê·∫©y modal sang b√™n tr√°i v√≤ng quay */
        }

        .modal-content {
            background: white; padding: 30px; border-radius: 25px; text-align: center;
            color: #333; width: 90%; max-width: 380px; border: 6px solid var(--gold);
            animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes bounceIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .modal-content h3 { font-family: 'Dancing Script', cursive; font-size: 35px; color: var(--red); margin: 0; }
        input { padding: 15px; font-size: 18px; border-radius: 12px; border: 2px solid #ddd; width: 85%; margin: 20px 0; outline: none; text-align: center; }
    </style>
</head>
<body>

<div id="loginModal" class="modal">
    <div class="modal-content">
        <h3>Xu√¢n B√≠nh Ng·ªç 2026</h3>
        <p>Vui l√≤ng nh·∫≠p qu√Ω danh ƒë·ªÉ nh·∫≠n l·ªôc:</p>
        <input type="text" id="nameInput" placeholder="T√™n c·ªßa b·∫°n..." maxlength="15">
        <button onclick="startGame()" style="background:var(--red); color:white; padding:12px 30px; border:none; border-radius:25px; font-weight:bold; cursor:pointer;">KHAI XU√ÇN</button>
    </div>
</div>

<div id="resultModal" class="modal" style="display:none">
    <div class="modal-content result-side">
        <h3 id="resTitle">üßß L·ªôc Xu√¢n!</h3>
        <p id="resMsg" style="font-weight: bold; font-size: 22px; color: #c23616; margin: 15px 0;"></p>
        <p id="resWish" style="font-style: italic; background: #fff9e6; padding: 15px; border-radius: 15px; font-size: 14px; border: 1px dashed var(--gold);"></p>
        <button onclick="closeModal()" style="margin-top:20px; padding:10px 25px; cursor:pointer; background:var(--gold); border:none; border-radius:20px; font-weight:bold;">C·∫¢M ∆†N üèÆ</button>
    </div>
</div>

<h2>üèÆ V√≤ng Quay L·ªôc Xu√¢n 2026 üèÆ</h2>

<div id="playerBox">
    <div style="font-weight:bold; color:var(--yellow-light); font-size: 20px;">üèÆ <span id="displayName"></span></div>
    <div id="spinStatus" style="font-size: 13px; color: #fff; margin-top: 5px;">Ch√†o m·ª´ng b·∫°n tham gia!</div>
</div>

<div class="wheel-outer" id="wheelCont">
    <div class="light-glow"></div>
    <div class="pointer"></div>
    <canvas id="wheel" width="500" height="500"></canvas>
</div>

<button id="spinBtn" disabled>üßß QUAY L·∫§Y L·ªòC üßß</button>

<script>
    const canvas = document.getElementById('wheel');
    const ctx = canvas.getContext('2d');
    const spinBtn = document.getElementById('spinBtn');
    const wheelCont = document.getElementById('wheelCont');

    let playerName = "";
    let currentRotation = 0;

    const items = [
        { label: "1.000ƒë", weight: 30, color: "#eb4d4b" },
        { label: "10.000ƒë", weight: 200, color: "#f9ca24" },
        { label: "L·ªùi ch√∫c may m·∫Øn", weight: 150, color: "#2ecc71" },
        { label: "20.000ƒë", weight: 250, color: "#22a6b3" },
        { label: "2.000ƒë", weight: 30, color: "#eb4d4b" },
        { label: "50.000ƒë", weight: 150, color: "#f0932b" },
        { label: "100.000ƒë", weight: 20, color: "#686de0" },
        { label: "5.000ƒë", weight: 80, color: "#f9ca24" },
        { label: "1.000.000ƒë", weight: 0, color: "#FFD700" },
        { label: "10.000ƒë", weight: 200, color: "#22a6b3" },
        { label: "20.000ƒë", weight: 250, color: "#f0932b" },
        { label: "L·ªùi ch√∫c may m·∫Øn", weight: 150, color: "#2ecc71" },
        { label: "50.000ƒë", weight: 150, color: "#686de0" },
        { label: "5.000ƒë", weight: 80, color: "#eb4d4b" },
        { label: "500.000ƒë", weight: 0.05, color: "#c0392b" },
        { label: "200.000ƒë", weight: 10, color: "#e056fd" }
    ];

    const wishes = [
        "Ch√∫c b·∫°n nƒÉm B√≠nh Ng·ªç m√£ ƒë√°o th√†nh c√¥ng, ti·ªÅn v√†o nh∆∞ n∆∞·ªõc, s·ª©c kh·ªèe d·∫ªo dai!",
        "Cung ch√∫c t√¢n xu√¢n! Ch√∫c b·∫°n v·∫°n s·ª± nh∆∞ √Ω, t·ª∑ s·ª± nh∆∞ m∆°, l√†m ƒÉn ph√°t ƒë·∫°t!",
        "NƒÉm m·ªõi ch√∫c b·∫°n b·ªõt lo √¢u, th√™m t√†i l·ªôc, t√¨nh duy√™n vi√™n m√£n, h·∫°nh ph√∫c ƒëong ƒë·∫ßy!"
    ];

    window.onload = () => {
        drawWheel();
        checkLockedStatus();
    };

    // KI·ªÇM TRA TR·∫†NG TH√ÅI ƒê√É QUAY
    function checkLockedStatus() {
        const hasSpun = localStorage.getItem('tet_2026_spun');
        const savedName = localStorage.getItem('tet_2026_name');
        const savedResult = localStorage.getItem('tet_2026_result');

        if (hasSpun === 'true') {
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('playerBox').style.display = 'block';
            document.getElementById('displayName').innerText = savedName;
            document.getElementById('spinStatus').innerHTML = "ƒê√£ nh·∫≠n l·ªôc: <b style='color:var(--gold)'>" + savedResult + "</b>";

            spinBtn.disabled = true;
            spinBtn.innerText = "H·∫æT L∆Ø·ª¢T QUAY";
            spinBtn.style.filter = "grayscale(1)";
        }
    }

    function startGame() {
        playerName = document.getElementById('nameInput').value.trim();
        if (!playerName) return alert("Vui l√≤ng nh·∫≠p t√™n c·ªßa b·∫°n!");
        document.getElementById('loginModal').style.display = 'none';
        document.getElementById('playerBox').style.display = 'block';
        document.getElementById('displayName').innerText = playerName;
        spinBtn.disabled = false;
    }

    function drawWheel() {
        const arc = (2 * Math.PI) / items.length;
        ctx.clearRect(0,0,500,500);
        items.forEach((item, i) => {
            const angle = i * arc;
            ctx.beginPath();
            ctx.fillStyle = item.color;
            ctx.moveTo(250, 250);
            ctx.arc(250, 250, 250, angle, angle + arc);
            ctx.fill();
            ctx.save();
            ctx.translate(250, 250);
            ctx.rotate(angle + arc / 2);
            ctx.textAlign = "right";
            ctx.fillStyle = "white";
            ctx.font = "bold 15px Arial";
            ctx.fillText(item.label, 235, 8);
            ctx.restore();
        });
    }

    spinBtn.onclick = () => {
        if (localStorage.getItem('tet_2026_spun') === 'true') return;

        spinBtn.disabled = true;
        wheelCont.classList.add('spinning');

        const totalWeight = items.reduce((s, i) => s + i.weight, 0);
        let rand = Math.random() * totalWeight;
        let winIdx = 0;
        for (let i = 0; i < items.length; i++) {
            if (rand < items[i].weight) { winIdx = i; break; }
            rand -= items[i].weight;
        }

        const segDeg = 360 / items.length;
        const targetPos = (360 - (winIdx * segDeg)) - (segDeg / 2) - 90;
        const finalRotation = currentRotation + (360 * 10) + (targetPos - (currentRotation % 360));

        canvas.style.transform = `rotate(${finalRotation}deg)`;
        currentRotation = finalRotation;

        setTimeout(() => {
            wheelCont.classList.remove('spinning');
            const resultLabel = items[winIdx].label;

            // L∆ØU T√™n + K·∫øt qu·∫£ V√ÄO STORAGE
            localStorage.setItem('tet_2026_spun', 'true');
            localStorage.setItem('tet_2026_name', playerName);
            localStorage.setItem('tet_2026_result', resultLabel);

            document.getElementById('resMsg').innerText = playerName + " ƒë√£ tr√∫ng: " + resultLabel;
            document.getElementById('resWish').innerText = wishes[Math.floor(Math.random() * wishes.length)];
            document.getElementById('resultModal').style.display = 'flex';

            document.getElementById('spinStatus').innerHTML = "ƒê√£ nh·∫≠n l·ªôc: <b style='color:var(--gold)'>" + resultLabel + "</b>";
            spinBtn.innerText = "H·∫æT L∆Ø·ª¢T QUAY";
            spinBtn.style.filter = "grayscale(1)";
        }, 8500);
    };

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }
</script>
</body>
</html>